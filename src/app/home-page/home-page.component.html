<div
  id="container"
  class="container-fluid"
  style="background-color: lightcyan;"
>
  <div class="row">
    <div
      id="first-div"
      class="col-md-3 mt-2"
      style="background-color: whitesmoke;"
    >
      <app-side-bar></app-side-bar>
    </div>

    <div id="second-div" class="col-md-5" style="background-color: whitesmoke;">
      <div
        class="container mt-2"
        style="
          width: 500px;
          background-color: white;
          margin-left: 50px;
          border-radius: 10px;
        "
      >
        <span>
          <img src="{{ image() }}" width="50px" style="border-radius: 50%;" />
          <input
            (click)="openDiv()"
            class="ml-2"
            [(ngModel)]="input"
            placeholder="what's in your mind, {{ getUserName() }}? "
            style="
              width: 300px;
              border-radius: 10px;
              background-color: lightgray;
              border-style: none;
            "
          />
        </span>
        <app-alert *ngIf="alertComponent"></app-alert>

        <hr />
        <span style="color: red;" class="font-weight-bold ml-4">
          <i class="fa fa-video-camera" aria-hidden="true"></i> live video</span
        ><span style="color: green;" class="font-weight-bold ml-5">
          <i class="fa fa-picture-o" aria-hidden="true"></i> photos</span
        ><span style="color: blue;" class="font-weight-bold ml-5">
          <i class="fa fa-calendar" aria-hidden="true"></i> events</span
        >
      </div>
      <br />
      <hr />
      <h2 style="color: blue;" class="font-weight-bold">News Feed</h2>
      <hr />
      <div
        *ngFor="let post of posts"
        class="text-center"
        style="background: white; border-radius: 10px;"
      >
        <span style="float: left;" *ngIf="post.sharedBy">
          <img
            src="{{ image() }}"
            width="50px"
            style="border-radius: 50%;"
          /><span class="font-weight-bold">{{ post.sharedBy }} shared:</span>
          <br />
        </span>

        <p style="float: left;" *ngIf="post.sharedByPhoto">
          <img
            class="mt-4"
            src="{{ post.sharedByPhoto }}"
            width="50px"
            height="50px"
            style="border-radius: 50%;"
          />
          <span *ngIf="post.name" class="font-weight-bold"
            >{{ post.name }} shared :</span
          >
        </p>
        <br />
        <p style="font-size: large; margin-top: 20px; float: left;">
          {{ post.text }}
        </p>

        <img
          *ngIf="post.image"
          src="{{ post.image }}"
          width="500"
          height="300px"
        />
        <br />
        <div style="margin-top: 50px;">
          <span
            *ngIf="
              post.likes === 0 || (post.likes > 1 && post.likePressed == false)
            "
            ><i
              class="fa fa-thumbs-up"
              aria-hidden="true"
              style="color: blue;"
            ></i>
            {{ post.likes }}</span
          >
          <span *ngIf="post.likes === 1" class="font-weight-bold"
            ><i
              class="fa fa-thumbs-up"
              aria-hidden="true"
              style="color: blue;"
            ></i
            ><small> {{ post.likes }} </small></span
          >
          <span *ngIf="post.likes > 1 && post.likePressed">
            <i
              class="fa fa-thumbs-up"
              aria-hidden="true"
              style="color: blue;"
            ></i>
            <small> you and {{ post.likes - 1 }} others </small></span
          >

          <span
            class="font-weight-bold"
            style="margin-left: 140px;"
            *ngIf="post.comments.length > 1"
            >{{ post.comments.length
            }}<a style="cursor: pointer;" (click)="showComments(post.id)"
              >comments</a
            ></span
          >
          <span
            class="font-weight-bold"
            style="margin-left: 140px;"
            *ngIf="post.comments.length <= 1"
            >{{ post.comments.length
            }}<a style="cursor: pointer;" (click)="showComments(post.id)"
              >comment</a
            ></span
          >
          <span
            *ngIf="post.description !== ''"
            (click)="goToDescription(post.id)"
            style="
              cursor: pointer;
              color: blue;
              font-weight: bold;
              margin-left: 130px;
            "
            >description</span
          >
        </div>
        <hr />
        <div class="row" style="margin-left: 80px;">
          <button
            *ngIf="!post.likePressed"
            class="btn btn-light btn-md col-md-3 ml-2"
            (click)="like(post.id)"
          >
            <i
              *ngIf="!post.likePressed"
              class="fa fa-thumbs-up"
              aria-hidden="true"
            ></i>
            {{ post.likePressed ? "unlike" : "like" }}
          </button>
          <button
            *ngIf="post.likePressed"
            class="btn btn-primary btn-md col-md-3 ml-2"
            (click)="like(post.id)"
          >
            <i class="fa fa-thumbs-down" aria-hidden="true"></i
            >{{ post.likePressed ? "unlike" : "like" }}
          </button>

          <button
            *ngIf="post.commented"
            class="btn btn-primary btn-md col-md-3 ml-2"
            (click)="comment(post.id, commentData)"
          >
            <i class="fa fa-comments" aria-hidden="true"></i>
            comment
          </button>
          <button
            *ngIf="!post.commented"
            class="btn btn-light btn-md col-md-3 ml-2"
            (click)="comment(post.id, commentData)"
          >
            <i class="fa fa-comments" aria-hidden="true"></i>
            comment
          </button>

          <button
            *ngIf="!post.shared"
            class="btn btn-light btn-md col-md-3 ml-2"
            (click)="share(post.id)"
          >
            <i class="fa fa-share-alt" aria-hidden="true"></i>
            share
          </button>
          <button
            *ngIf="post.shared"
            class="btn btn-primary btn-md col-md-3 ml-2"
            (click)="share(post.id)"
          >
            <i class="fa fa-share-alt" aria-hidden="true"></i>
            share
          </button>
        </div>
        <hr />
        <span style="margin-right: 145px;">
          <img src="{{ image() }}" width="50px" style="border-radius: 50%;" />
          <input
            (keydown.enter)="comment(post.id, commentData)"
            class="ml-2"
            [(ngModel)]="commentData"
            placeholder="write a comment"
            style="
              width: 350px;
              border-radius: 10px;
              background-color: lightgray;
              border-style: none;
            "
          />
        </span>

        <div class="container-fluid" *ngIf="post.showComments">
          <div
            *ngFor="let i of post.comments"
            style="background-color: whitesmoke;"
          >
            <span
              ><img
                src="{{ i.image }}"
                width="35px"
                style="border-radius: 50%; margin-top: 10px;"
              />

              {{ i.name }} :

              <span *ngIf="!i.editMode">{{ i.comment }}</span>
              <span *ngIf="i.editMode"
                ><input #editedComment value="{{ i.comment }}" /><button
                  class="btn btn-primary btn-sm"
                  (click)="edit(post.id, i.commentId, editedComment)"
                >
                  edit
                </button></span
              >
              <span class="ml-3">
                <i
                  class="fa fa-thumbs-up mr-5"
                  aria-hidden="true"
                  style="color: blue; cursor: pointer;"
                  >{{ i.likes }}</i
                >
              </span>
            </span>

            <span style="float: right; margin-top: 25px;">
              <small>
                <i
                  *ngIf="i.likePressed"
                  (click)="commentLike(post.id, i.commentId)"
                  class="fa fa-thumbs-down mr-2"
                  aria-hidden="true"
                  style="color: blue; cursor: pointer;"
                ></i>
              </small>
              <small>
                <i
                  *ngIf="!i.likePressed"
                  (click)="commentLike(post.id, i.commentId)"
                  class="fa fa-thumbs-up mr-2"
                  aria-hidden="true"
                  style="color: blue; cursor: pointer;"
                ></i>
              </small>

              <small>
                <i
                  *ngIf="i.remove"
                  style="cursor: pointer; color: black;"
                  (click)="edit(post.id, i.commentId, editedComment)"
                  class="fa fa-pencil-square-o mr-2"
                  aria-hidden="true"
                ></i>
              </small>
              <small>
                <i
                  *ngIf="i.remove"
                  (click)="removeComment(post.id, i.commentId)"
                  style="cursor: pointer; color: red;"
                  class="fa fa-times mr-2"
                  aria-hidden="true"
                ></i
              ></small>
            </span>
            <hr />
          </div>
        </div>
        <hr />
      </div>
      <br />
    </div>
    <div id="last-div" class="col-md-4" style="background-color: whitesmoke;">
      <app-my-friends></app-my-friends>
    </div>
  </div>
</div>
