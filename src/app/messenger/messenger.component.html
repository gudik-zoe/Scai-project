<br />
<br />
<br />
<br />
<br />
<div class="row">
  <div
    class="col-md-3 ml-5"
    style="
      border: solid;
      height: 400px;
      width: 200px;
      border-radius: 10px;
      background-color: cornsilk;
    "
  >
    <div class="container-fluid">
      <h3>My friends</h3>
      <hr />
      <div *ngFor="let user of users">
        <div
          id="friend"
          style="cursor: pointer; border-radius: 9px;"
          *ngIf="users.indexOf(user) !== currentUser"
          (click)="open(users.indexOf(user))"
        >
          <span
            ><img
              src="{{ user.image }}"
              width="40px"
              height="40px"
              style="border-radius: 50%;"
            />
            <span class="font-weight-bold">
              {{ user.name + " " + user.lastName }}
            </span>
          </span>
          <hr />
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div
      class="container"
      *ngIf="id === 0 || id > 0"
      style="
        background-color: linen;
        width: 350px;
        height: 250px;
        border-radius: 8px;
      "
    >
      <img
        src="{{ users[id].image }}"
        width="80px"
        height="80px"
        style="border-radius: 50%; margin-left: 100px;"
      />

      <br />
      <span style="margin-left: 110px;" class="font-weight-bold">{{
        users[id].name + " " + users[id].lastName
      }}</span>

      <span
        ><input
          type="text"
          width="200px"
          [(ngModel)]="inputData"
          style="margin-left: 40px; margin-top: 15px;"
        />

        <button class="btn btn-info" style="width: 35px; height: 35px;">
          <input
            type="file"
            (change)="uploadImage($event)"
            name="file"
            id="file"
            class="inputfile"
          />
          <label for="file"
            ><i class="fa fa-upload" aria-hidden="true"></i
          ></label>
        </button>
        <button
          type="button"
          class="btn btn-primary btn-sm mb-1 ml-1"
          (click)="send(id, inputData, foto)"
        >
          send
        </button></span
      >
      <br />
      <small class="text-danger ml-5" *ngIf="error"
        >enter a message
        <button type="button" class="btn btn-danger btn-sm" (click)="ok()">
          ok
        </button></small
      >
    </div>
  </div>
  <div class="col-md-3">
    <div
      class="container-fluid"
      style="
        border: solid;
        width: 400px;
        border-radius: 8px;
        background-color: cornsilk;
      "
    >
      <h2 class="text-center">
        inbox
      </h2>
      <hr />

      <div *ngFor="let m of messages">
        <div
          style="
            background-color: burlywood;
            border-radius: 9px;
            margin-top: 5px;
            margin-bottom: 5px;
            width: 200px;
          "
          *ngIf="m.to >= 0"
          class="font-weight-bold"
        >
          you to

          <img
            src="{{ users[m.to].image }}"
            width="30px"
            height="30px"
            style="border-radius: 50%;"
          />:
          {{ m.message }}
          <img *ngIf="m.foto" src="{{ m.foto }}" width="70px" height="70px" />
        </div>

        <div
          *ngIf="m.sender >= 0"
          class="font-weight-bold"
          style="
            background-color: lightgray;
            border-radius: 9px;
            width: 200px;
            margin-top: 5px;
            margin-left: 160px;
          "
        >
          from
          <img
            src="{{ users[m.sender].image }}"
            width="30px"
            height="30px"
            style="border-radius: 50%;"
          />:
          {{ m.message }}
          <img *ngIf="m.foto" src="{{ m.foto }}" width="70px" height="70px" />
          <i
            *ngIf="m.sender >= 0"
            style="color: coral; cursor: pointer;"
            (click)="navigate(m.sender)"
            class="fa fa-reply"
            aria-hidden="true"
          ></i>
        </div>
      </div>
    </div>
  </div>
</div>
