<div class="container-fluid">
  <!-- <div class="container"> -->
  <div *ngIf="userData" class="post-container">
    <ng-container *ngIf="post.doneBy && !post.postOriginalId && !post.postedOn">
      <img src="{{  post.doneBy.profilePhoto }}" width="50px" style="border-radius: 50%; float: left;" height="50px" />
      <span *ngIf="!post.postedOn" style="float: left;" class="font-weight-bold mt-3">
        {{ post.doneBy.firstName + " " + post.doneBy.lastName }} shared
        <p style="color:gray ; font-size: x-small;">
          {{post.date}}</p></span>
      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i (click)="editPost(post)" style="color: blueviolet;" class=" fa fa-pencil" aria-hidden="true"></i>
      </div>
      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i style="color: red;" (click)=" deletePost(post.idPost)" class="fa fa-trash" aria-hidden="true"></i>
      </div>
      <br>
      <p class="mt-5" *ngIf="post.text">{{post.text}}</p>
      <img *ngIf="post.image" src="{{ post.image }}" style="width: 80%; height: 60%; border-radius: 10px;" />
    </ng-container>

    <!-- shared post -->
    <ng-container *ngIf="post.doneBy && post.postOriginalId && post.originalPostDoneBy && !post.postedOn">
      <img src="{{  post.doneBy.profilePhoto }}" width="50px" style="border-radius: 50%; float: left;" height="50px" />
      <span style="float: left;" class="font-weight-bold mt-3">
        {{ post.doneBy.firstName + " " + post.doneBy.lastName }} reshared
        <p style="color:gray ; font-size: x-small;">{{post.date}} </p> </span>
      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i style=" color:red;  font-size:large; cursor: pointer;" (click)=" deletePost(post.idPost)" class="fa fa-trash"
          aria-hidden="true"></i>
      </div>
      <br>
      <p class="mt-5" *ngIf="post.extraText">{{post.extraText}}</p>
      <div *ngIf="post.postOriginalId  && post.originalPostDoneBy" (click)="toDescription(post.postOriginalId)"
        style="margin-top: 30px; border: 1px solid black; cursor: pointer; ">
        <div style="margin-top: 10px; float: left;">
          <img src="{{  post.originalPostDoneBy.profilePhoto }}" width="50px" style="border-radius: 50%;"
            height="50px" />
          <span class="font-weight-bold">
            {{ post.originalPostDoneBy.firstName + " " + post.originalPostDoneBy.lastName }}
            shared: </span>
        </div>
        <p style="padding-right: 220px; margin-top: 50px;"> {{ post.text }} </p>
        <img *ngIf="post.image" src="{{  post.image }}" style="width: 80%; height: 60%; border-radius: 10px;" />
        <p><i class="fa fa-thumbs-up" aria-hidden="true" style="color: blue"> </i>{{post.likesNumber}}
          <i class="fa fa-comments" aria-hidden="true" style="margin-left: 150px;"></i>{{post.commentsNumber}}</p>
      </div>
    </ng-container>


    <!-- posted on a wall post -->
    <ng-container *ngIf="post.postedOn && post.doneBy && post.postedOnData && !post.postOriginalId">
      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i (click)="editPost(post)" style="font-size:large; cursor: pointer; color: blueviolet;" class=" fa fa-pencil"
          aria-hidden="true"></i>
      </div>
      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i style="font-size:large; cursor: pointer; color: red" (click)=" deletePost(post.idPost)" class="fa fa-trash"
          aria-hidden="true"></i>
      </div>
      <span class="font-weight-bold" style=" margin-left: -180px;">
        <img src="{{  post.doneBy.profilePhoto }}" style="width: 45px; height: 45px; border-radius: 50%;" />
        {{post.doneBy.firstName + " " + post.doneBy.lastName}}

        <i style="padding: 10px;" class="fa fa-caret-right fa-lg" aria-hidden="true"></i>
        <img src="{{ post.postedOnData.profilePhoto }}" style="width: 45px; height: 45px; border-radius: 50%;" />
        {{post.postedOnData.firstName  + " " + post.postedOnData.lastName}}
        <p style="color:gray ; font-size: x-small; margin-left: -350px;">
          {{post.date}} </p>
      </span>
      <p style="margin-top: 10px;">{{post.text}}</p>
      <img *ngIf="post.image" src="{{ post.image }}" style="width: 80%; height: 60%; border-radius: 10px;" />
    </ng-container>


    <ng-container *ngIf="post.postOriginalId && !post.originalPostDoneBy && post.doneBy">
      <img src="{{  post.doneBy.profilePhoto }}" width="50px" style="border-radius: 50%; float: left;" height="50px" />
      <span *ngIf="!post.postedOn" style="float: left;" class="font-weight-bold mt-3">
        {{ post.doneBy.firstName + " " + post.doneBy.lastName }} shared </span>

      <div *ngIf="post.postCreatorId == userData.idAccount" class="icon">
        <i style="font-size:large; cursor: pointer; color: red" (click)=" deletePost(post.idPost)" class="fa fa-trash"
          aria-hidden="true"></i>
      </div>
      <div style="margin-top: 50px; border: 1px solid black; cursor: pointer;">
        content is unavailabe could be because of its setting was set on private or that it has been deleted
      </div>

    </ng-container>

    <hr />
    <span><i class="fa fa-thumbs-up" aria-hidden="true" style="color: blue"></i> {{ post.postLikes.length }} </span>
    <span (click)="openComments()" class="font-weight-bold"
      style="margin-left: 140px; cursor: pointer;">{{ post.comments.length }}comments</span>
    <span (click)="goToDescription(post.idPost)"
      style="cursor: pointer; color: blue; font-weight: bold; margin-left: 130px">description</span>
    <hr />

    <button [disabled]="post.postOriginalId && !post.originalPostDoneBy || status != 'friends'"
      [ngClass]="getLike() ? 'btn btn-primary btn-md col-md-3' : 'btn btn-light btn-md col-md-3'" (click)="like(post)">
      <i class="fa fa-thumbs-up" aria-hidden="true"></i>
      like
    </button>


    <button [disabled]="post.postOriginalId && !post.originalPostDoneBy || status != 'friends'"
      [ngClass]="getComment() ? 'btn btn-primary btn-md col-md-3 ml-2' : 'btn btn-light btn-md col-md-3 ml-2'"
      (click)="comment(post , commentText)">
      <i class="fa fa-comments" aria-hidden="true"></i>
      comment
    </button>


    <button
      [disabled]="post.postOriginalId && !post.originalPostDoneBy || post.postCreatorId == userData.idAccount || post.postedOn || status != 'friends'"
      (click)="sharePost(post)" class="btn btn-light btn-md col-md-3 ml-2">
      <i class="fa fa-share-alt" aria-hidden="true"></i>
      share
    </button>
    <hr>
    <ng-container *ngIf="openCommentsList">
      <div class="container" *ngFor="let comment of post.comments">
        <div *ngIf="comment.doneBy" class="container-fluid mt-3" style=" display: flex;
        align-items: flex-start;
        justify-content: left;
         ">
          <img src="{{ comment.doneBy.profilePhoto }}" width="35px" style="border-radius: 50%;" height="35px" />
          <div class="container-fluid" style="background-color: whitesmoke; border-radius: 8px; padding: 5px;">
            <div *ngIf="comment.commentCreatorId == userData.idAccount" class="icon">
              <i (click)="editComment(comment.text ,comment.idComment)"
                *ngIf="comment.commentCreatorId == userData.idAccount" style="color: blue; cursor: pointer;"
                class="fa fa-pencil fa-xxs" aria-hidden="true"></i>
            </div>
            <div *ngIf="comment.commentCreatorId == userData.idAccount" class="icon">
              <i (click)="deleteComment(comment.idComment)" *ngIf="comment.commentCreatorId == userData.idAccount"
                style="color: red; cursor: pointer;" class="fa fa-trash" aria-hidden="true"></i>
            </div>
            <i [ngClass]=" getCommentLike(comment) ? 'commentLike' : 'commentUnLike' "
              *ngIf="userData.idAccount != comment.commentCreatorId" (click)="likeComment(comment)"
              class="fa fa-thumbs-up fa-lg" id="commentLike" aria-hidden="true"></i>
            <span class="font-weight-bold" style="float: left;">
              {{comment.doneBy.firstName + " " + comment.doneBy.lastName }}: </span>
            <br>
            <p *ngIf="!editCommentOn || commentId != comment.idComment" style="float: left;">{{comment.text}}
            </p>

            <input *ngIf="editCommentOn && commentId == comment.idComment" [(ngModel)]="editCommentValue"
              class="edit-comment-input" />
            <button [disabled]="!editCommentValue && status == 'friends'"
              (click)="confirmEditComment(comment , editCommentValue)"
              *ngIf="editCommentOn && commentId == comment.idComment" class="btn btn-info btn-sm">edit</button>
          </div>

        </div>
        <small style="color: gray;   float: left;
        margin-left: 80px;">{{comment.date}}</small>
        <span *ngIf="comment.commentLike.length > 0" (mouseenter)="hoverFunction(comment)" class="comment-number"
          style="background-color: lightgray; border-radius: 9px; padding: 5px;  margin-left:350px ; width: min-content; ">
          <img src="../../assets/download (1).jpg" width="20px" height="20px" style="border-radius:50% ;">
          {{comment.commentLike.length}}
          <span class="comment-info">
            <div *ngFor="let liker of commentLikers ;"> {{ liker.firstName + " " + liker.lastName }}</div>
          </span>
        </span>

      </div>
    </ng-container>
    <br>
    <div style="margin-top: 10px;">
      <img src="{{userData.profilePhoto }}" width="40px" height="40px" style="border-radius: 50%" />
      <input class="comment-input" [(ngModel)]="commentText" placeholder="write a comment" />
      <p class="text-danger">{{errorPhrase}}</p>
    </div>
  </div>
  <!-- </div> -->
</div>