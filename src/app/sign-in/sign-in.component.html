<div class="container-fluid">
  <div class="container" *ngIf="!resetPasswordActive">
    <form [formGroup]="signInForm">
      <div [class]="fieldError ? 'field-error':'form-group'">
        <mat-form-field appearance="legacy" style="width: 100%; ">
          <mat-label>Email</mat-label>
          <mat-icon matSuffix>email</mat-icon>
          <input type="email" matInput formControlName="email" [class.is-invalid]="
          signInForm.get('email').invalid &&
          signInForm.get('email').touched
        " />
        </mat-form-field>
        <small class="text-danger" *ngIf="
          signInForm.get('email').errors?.required &&
          signInForm.get('email').touched
        ">
          this field is required
        </small>
        <small class="text-danger" *ngIf="
          signInForm.get('email').errors?.email &&
          signInForm.get('email').touched
        ">
          invalid email
        </small>

        <mat-form-field appearance="legacy" style="width: 100%;">
          <mat-label>Password </mat-label>
          <mat-icon matSuffix>https</mat-icon>
          <input [type]="showPassword ? 'text' : 'password' " matInput formControlName="password" />
        </mat-form-field>
        <div class="check-box">
          <mat-checkbox (click)="showThePassword()">show
            password
          </mat-checkbox>
          <br>
          <a class="reset" (click)="resetPassword()">Reset password</a>
        </div>
      </div>
      <small class="text-danger" *ngIf="
          signInForm.get('password').errors?.required &&
          signInForm.get('password').touched
        ">
        this field is required
      </small>
      <p class="text-danger">
        {{errorPhrase}}
      </p>
      <mat-spinner *ngIf="loading" diameter="30">
      </mat-spinner>
      <button *ngIf="!loading" color="primary" style="margin-top:4px;" style="width: 100%;"
        [disabled]="!signInForm.valid" mat-flat-button [disabled]="!signInForm.valid" (click)="
    signIn(
      signInForm.get('email').value,
      signInForm.get('password').value
      )
      ">

        Log In</button>


    </form>
  </div>
  <div class="container" *ngIf="resetPasswordActive">
    <form [formGroup]="resetPasswordForm">
      <div>
        <mat-form-field appearance="legacy" style="width: 100%; ">
          <mat-label>tempPassword</mat-label>
          <mat-icon matSuffix>https</mat-icon>
          <input type="password" matInput formControlName="tempPassword" [class.is-invalid]="
              resetPasswordForm.get('tempPassword').invalid &&
              resetPasswordForm.get('tempPassword').touched
            " />
        </mat-form-field>
        <mat-form-field appearance="legacy" style="width: 100%; ">
          <mat-label>new password</mat-label>
          <mat-icon matSuffix>https</mat-icon>
          <input type="password" matInput formControlName="newPassword" [class.is-invalid]="
              resetPasswordForm.get('newPassword').invalid &&
              resetPasswordForm.get('newPassword').touched
            " />
        </mat-form-field>
        <small class="text-danger" *ngIf="
              resetPasswordForm.get('newPassword').errors?.required &&
              resetPasswordForm.get('newPassword').touched
            ">
          this field is required
        </small>
        <small class="text-danger" *ngIf="
              resetPasswordForm.get('newPassword').errors?.email &&
              resetPasswordForm.get('newPassword').touched
            ">
          invalid password
        </small>

        <mat-form-field appearance="legacy" style="width: 100%;">
          <mat-label>Confirm new Password </mat-label>
          <mat-icon matSuffix>https</mat-icon>
          <input type="password" matInput formControlName="confirmNewPassword" />
        </mat-form-field>
        <!-- <div class="check-box">
            <mat-checkbox (click)="showThePassword()">show
              password
            </mat-checkbox>
            <br>
              </div> -->
      </div>
      <small class="text-danger" *ngIf="
              resetPasswordForm.get('confirmNewPassword').errors?.required &&
              resetPasswordForm.get('confirmNewPassword').touched
            ">
        this field is required
      </small>
      <p class="text-danger">

      </p>


      <button *ngIf="!loading" color="primary" style="margin-top:4px;" style="width: 100%;" mat-flat-button
        [disabled]="!resetPasswordForm.valid" (click)="resetThePassword()">

        confirm reset password</button>
    </form>
    <!-- <button mat-flat-button [disabled]="!tempPassword" (click)="checkTempPassword()">reset password</button> -->
  </div>
</div>